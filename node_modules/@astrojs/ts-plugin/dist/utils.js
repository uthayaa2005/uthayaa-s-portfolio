"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var utils_exports = {};
__export(utils_exports, {
  ensureRealAstroFilePath: () => ensureRealAstroFilePath,
  getConfigPathForProject: () => getConfigPathForProject,
  isAstroFilePath: () => isAstroFilePath,
  isNotNullOrUndefined: () => isNotNullOrUndefined,
  isVirtualAstroFilePath: () => isVirtualAstroFilePath,
  readProjectAstroFilesFromFs: () => readProjectAstroFilesFromFs,
  replaceDeep: () => replaceDeep,
  toRealAstroFilePath: () => toRealAstroFilePath
});
module.exports = __toCommonJS(utils_exports);
function isAstroFilePath(filePath) {
  return filePath.endsWith(".astro");
}
function isVirtualAstroFilePath(filePath) {
  return filePath.endsWith(".astro.ts");
}
function toRealAstroFilePath(filePath) {
  return filePath.slice(0, -".ts".length);
}
function ensureRealAstroFilePath(filePath) {
  return isVirtualAstroFilePath(filePath) ? toRealAstroFilePath(filePath) : filePath;
}
function isNotNullOrUndefined(val) {
  return val !== void 0 && val !== null;
}
function replaceDeep(obj, searchStr, replacementStr) {
  return _replaceDeep(obj);
  function _replaceDeep(_obj) {
    if (typeof _obj === "string") {
      return _obj.replace(searchStr, replacementStr);
    }
    if (Array.isArray(_obj)) {
      return _obj.map((entry) => _replaceDeep(entry));
    }
    if (typeof _obj === "object") {
      return Object.keys(_obj).reduce((_o, key) => {
        _o[key] = _replaceDeep(_obj[key]);
        return _o;
      }, {});
    }
    return _obj;
  }
}
function getConfigPathForProject(project) {
  var _a;
  return (_a = project.canonicalConfigFilePath) != null ? _a : project.getCompilerOptions().configFilePath;
}
function readProjectAstroFilesFromFs(ts, project, parsedCommandLine) {
  const fileSpec = parsedCommandLine.raw;
  const { include, exclude } = fileSpec;
  if ((include == null ? void 0 : include.length) === 0) {
    return [];
  }
  return ts.sys.readDirectory(project.getCurrentDirectory() || process.cwd(), [".astro"], exclude, include).map(ts.server.toNormalizedPath);
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  ensureRealAstroFilePath,
  getConfigPathForProject,
  isAstroFilePath,
  isNotNullOrUndefined,
  isVirtualAstroFilePath,
  readProjectAstroFilesFromFs,
  replaceDeep,
  toRealAstroFilePath
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3V0aWxzLnRzIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQU8sU0FBUyxnQkFBZ0IsVUFBa0I7QUFDakQsU0FBTyxTQUFTLFNBQVMsUUFBUTtBQUNsQztBQUVPLFNBQVMsdUJBQXVCLFVBQWtCO0FBQ3hELFNBQU8sU0FBUyxTQUFTLFdBQVc7QUFDckM7QUFFTyxTQUFTLG9CQUFvQixVQUFrQjtBQUNyRCxTQUFPLFNBQVMsTUFBTSxHQUFHLENBQUMsTUFBTSxNQUFNO0FBQ3ZDO0FBRU8sU0FBUyx3QkFBd0IsVUFBa0I7QUFDekQsU0FBTyx1QkFBdUIsUUFBUSxJQUFJLG9CQUFvQixRQUFRLElBQUk7QUFDM0U7QUFFTyxTQUFTLHFCQUF3QixLQUFxQztBQUM1RSxTQUFPLFFBQVEsVUFBYSxRQUFRO0FBQ3JDO0FBS08sU0FBUyxZQUNmLEtBQ0EsV0FDQSxnQkFDSTtBQUNKLFNBQU8sYUFBYSxHQUFHO0FBRXZCLFdBQVMsYUFBYSxNQUFnQjtBQUNyQyxRQUFJLE9BQU8sU0FBUyxVQUFVO0FBQzdCLGFBQU8sS0FBSyxRQUFRLFdBQVcsY0FBYztBQUFBLElBQzlDO0FBQ0EsUUFBSSxNQUFNLFFBQVEsSUFBSSxHQUFHO0FBQ3hCLGFBQU8sS0FBSyxJQUFJLENBQUMsVUFBVSxhQUFhLEtBQUssQ0FBQztBQUFBLElBQy9DO0FBQ0EsUUFBSSxPQUFPLFNBQVMsVUFBVTtBQUM3QixhQUFPLE9BQU8sS0FBSyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksUUFBUTtBQUM1QyxXQUFHLE9BQU8sYUFBYSxLQUFLLElBQUk7QUFDaEMsZUFBTztBQUFBLE1BQ1IsR0FBRyxDQUFDLENBQVE7QUFBQSxJQUNiO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFDRDtBQUVPLFNBQVMsd0JBQXdCLFNBQTRCO0FBL0NwRTtBQWdEQyxVQUNFLGFBQXdDLDRCQUF4QyxZQUNBLFFBQVEsbUJBQW1CLEVBQVU7QUFFeEM7QUFFTyxTQUFTLDRCQUNmLElBQ0EsU0FDQSxtQkFDQztBQUNELFFBQU0sV0FBd0Isa0JBQWtCO0FBQ2hELFFBQU0sRUFBRSxTQUFTLFFBQVEsSUFBSTtBQUU3QixPQUFJLG1DQUFTLFlBQVcsR0FBRztBQUMxQixXQUFPLENBQUM7QUFBQSxFQUNUO0FBRUEsU0FBTyxHQUFHLElBQ1IsY0FBYyxRQUFRLG9CQUFvQixLQUFLLFFBQVEsSUFBSSxHQUFHLENBQUMsUUFBUSxHQUFHLFNBQVMsT0FBTyxFQUMxRixJQUFJLEdBQUcsT0FBTyxnQkFBZ0I7QUFDakM7IiwKICAibmFtZXMiOiBbXQp9Cg==
